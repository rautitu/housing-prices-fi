## Prod overrides â€” external Caddy proxy handles HTTPS.
## Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml --env-file .env.prod up -d

services:
  postgres:
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 512M

  fetcher:
    restart: "no"
    deploy:
      resources:
        limits:
          memory: 256M

  api:
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 256M

  frontend:
    restart: unless-stopped
    ports:
      - "${FRONTEND_PORT:-51100}:8080"  # External Caddy proxy routes here
    deploy:
      resources:
        limits:
          memory: 128M
